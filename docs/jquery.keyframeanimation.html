<!DOCTYPE html>  <html> <head>   <title>jquery.keyframeanimation.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               jquery.keyframeanimation.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>An animation framework based on a CSS animations-like syntax.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Dependencies</h2>

<ul>
<li><a href="http://jquery.com">jQuery</a></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h2>References</h2>

<ul>
<li><a href="https://developer.mozilla.org/en/CSS/CSS_animations">CSS Animations - MDN</a></li>
<li><a href="http://www.w3.org/TR/css3-animations/">W3C CSS Animations Specification</a></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h2>Usage</h2>

<pre><code>$('.animated').keyframeAnimation({
    animationDuration: 5000,
    keyframes: {
        0: { 'font-size': '200%' },
        0.25: { 'font-size': '500%' },
        1: { 'font-size': '50%' }
    },
    delays: [0, 1000, 2000], // correspond with elements in $('.animated')
    animationIterationCount: 2,
    animationTimingFunction: 'easeInOut'
});
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <h2>Settings</h2>

<ul>
<li><p><code>keyframes</code> <br />
An object of the form <code>{ percentage: { /* CSS property-value pairs */ }, 
... }</code> similar to the CSS 
<a href="https://developer.mozilla.org/en/CSS/@keyframes"><code>@keyframes</code></a> at-rule. 
Only CSS properties supported by <code>$.fn.animate</code> can be animated. 
Percentages are specified using numbers between 0 and 1 (inclusive). This 
<em>must</em> include properties named <code>0</code> and <code>1</code> (the starting and ending 
states of the animation).</p></li>
<li><p><code>delays</code> <br />
An array whose effect is analogous to the <code>animation-delay</code> CSS property. 
Delays are are settable per-element by ensuring that indexes in this 
array correspond to element indexes in the jQuery set. Only unitless 
numbers (milliseconds) are accepted as array elements.</p></li>
<li><p><code>animationDuration</code> <br />
Corresponds to the <code>animation-duration</code> CSS property. Only unitless 
numbers (milliseconds) are accepted.</p></li>
<li><p><code>animationIterationCount</code> <br />
Corresponds to the <code>animation-iteration-count</code> CSS property.</p></li>
<li><p><code>animationTimingFunction</code> <br />
Corresponds to the <code>animation-timing-function</code> CSS property. Only the 
cubic-bezier keyword timing-functions are supported.</p></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h2>Author</h2>

<p><a href="http://mattkantor.com">Matt Kantor</a></p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <hr />             </td>             <td class="code">               <div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
	</pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <h2>Public Interface</h2>             </td>             <td class="code">               <div class="highlight"><pre>	
	</pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Call the specified method (passing along subsequent arguments), get
the value of the specified property, or default to calling the 
<code>initialize</code> method.</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">keyframeAnimation</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">propertyOrSettings</span><span class="cm">/* [, ...] */</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">keyframeAnimation</span><span class="p">[</span><span class="nx">propertyOrSettings</span><span class="p">])</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Is this property callable?</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">keyframeAnimation</span><span class="p">[</span><span class="nx">propertyOrSettings</span><span class="p">].</span><span class="nx">apply</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">keyframeAnimation</span><span class="p">[</span><span class="nx">propertyOrSettings</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">keyframeAnimation</span><span class="p">[</span><span class="nx">propertyOrSettings</span><span class="p">];</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">keyframeAnimation</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">};</span>
	
	
	<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">keyframeAnimation</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="s1">&#39;0.3.5&#39;</span><span class="p">;</span>
	
	</pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Begin the animation cycle for the jQuery element set (<code>this</code>). 
Animation particulars are specified using a <code>settings</code> object.</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">keyframeAnimation</span><span class="p">.</span><span class="nx">initialize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Every setting has a default value which emulates the CSS defaults
as closely as possible. The animation won't do anything if some of 
the settings are left at their default values.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">defaultSettings</span> <span class="o">=</span> <span class="p">{</span>
			<span class="nx">keyframes</span><span class="o">:</span> <span class="p">{},</span>
			<span class="nx">delays</span><span class="o">:</span> <span class="p">[],</span>
			<span class="nx">animationDuration</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
			<span class="nx">animationIterationCount</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
			<span class="nx">animationTimingFunction</span><span class="o">:</span> <span class="s1">&#39;ease&#39;</span>
		<span class="p">};</span>
		<span class="nx">settings</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">defaultSettings</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
		
		<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		</pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Create a namespace for element-associated data owned by this 
plugin.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">if</span><span class="p">(</span><span class="nx">elements</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">elements</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">,</span> <span class="p">{});</span>
		<span class="p">}</span>
		</pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Sort percentages for consistent iteration order.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">orderedKeyframePercentages</span> <span class="o">=</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span> <span class="o">?</span>
			<span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">keyframes</span><span class="p">)</span> <span class="o">:</span>
			<span class="nx">$</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">keyframes</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">styles</span><span class="p">,</span> <span class="nx">percentage</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">percentage</span><span class="p">;</span> <span class="p">})</span>
		<span class="p">).</span><span class="nx">sort</span><span class="p">();</span>
		
		<span class="kd">var</span> <span class="nx">currentIteration</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>This function is called repeatedly to perform the animation cycle.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">iterateAnimation</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
			<span class="nx">currentIteration</span><span class="o">++</span><span class="p">;</span>
			</pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>If there are more animation iterations:</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">animationIterationCount</span> <span class="o">===</span> <span class="s1">&#39;infinite&#39;</span> <span class="o">||</span> <span class="nx">currentIteration</span> <span class="o">&lt;=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animationIterationCount</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">elements</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">).</span><span class="nx">timeouts</span> <span class="o">=</span> <span class="p">[];</span>
				</pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Animate each element and tell the next iteration to run 
after the delay specified by <code>animationDuration</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="nx">elements</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">animateElement</span><span class="p">);</span>
				<span class="nx">elements</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">).</span><span class="nx">timeouts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">iterateAnimation</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animationDuration</span><span class="p">));</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Otherwise, animation iteration is complete. Do some 
cleanup.</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="k">delete</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">).</span><span class="nx">timeouts</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">};</span>
		</pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>To animate a single element, iterate over each keyframe and set up 
an animation with the appropriate delay (as determined by the 
element's delay and the keyframe percentage) and duration 
(calculated using the difference between keyframe percentages).</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">animateElement</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elementIndex</span><span class="p">,</span> <span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">elementDelay</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delays</span><span class="p">[</span><span class="nx">elementIndex</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
			</pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Set up transitions between each keyframe.</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">orderedKeyframePercentages</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">keyframeIndex</span><span class="p">,</span> <span class="nx">percentage</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">styles</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">keyframes</span><span class="p">[</span><span class="nx">percentage</span><span class="p">];</span>
				</pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Figure out the duration and offset for this keyframe.</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="cm">/* TODO: Move this out of the loop so it only needs to be </span>
<span class="cm">				   computed once (or memoize). */</span>
				<span class="kd">var</span> <span class="nx">percentageBetweenKeyframes</span><span class="p">,</span> <span class="nx">keyframeOffset</span><span class="p">;</span>
				<span class="k">if</span><span class="p">(</span><span class="nx">percentage</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>These <code>orderedKeyframePercentages</code> indexes should 
never go out of bounds because the percentages are 
ordered and 0% must always be present/first.</p>             </td>             <td class="code">               <div class="highlight"><pre>					</pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Percentage of total time that this particular 
keyframe transition should take; the interval 
between this keyframe and the previous one.</p>             </td>             <td class="code">               <div class="highlight"><pre>					<span class="nx">percentageBetweenKeyframes</span> <span class="o">=</span> <span class="p">(</span><span class="nx">percentage</span> <span class="o">-</span> <span class="nx">orderedKeyframePercentages</span><span class="p">[</span><span class="nx">keyframeIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
					</pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Offset transition animation start times based on 
the percentage of the previous keyframe.</p>             </td>             <td class="code">               <div class="highlight"><pre>					<span class="nx">keyframeOffset</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animationDuration</span> <span class="o">*</span> <span class="nx">orderedKeyframePercentages</span><span class="p">[</span><span class="nx">keyframeIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>The initial keyframe's styles are applied instantly.</p>             </td>             <td class="code">               <div class="highlight"><pre>					<span class="nx">percentageBetweenKeyframes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
					<span class="nx">keyframeOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
				<span class="p">}</span>
				</pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>How long the transition to this keyframe should last.</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="kd">var</span> <span class="nx">interpolationDuration</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animationDuration</span> <span class="o">*</span> <span class="nx">percentageBetweenKeyframes</span><span class="p">;</span>
				</pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Delay transition start as needed.</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="nx">elements</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">).</span><span class="nx">timeouts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Complete any previous animations immediately before 
beginning the next animation. At first glance this 
may appear to be a complicated way of doing 
<code>queue: false</code>, but this setup has better behavior 
when timeouts drift. Note that unlike the <code>fx</code> 
queue, custom queues need to be manually traversed 
using <code>$.fn.dequeue</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>					<span class="cm">/* FIXME? Will calling `.stop()` thwart attempts to </span>
<span class="cm">					   resolve the &quot;skipped styles&quot; bug? (Since the </span>
<span class="cm">					   solution to that will probably need multiple </span>
<span class="cm">					   simultaneous animations.) Maybe there should be </span>
<span class="cm">					   one queue per keyframe? */</span>
					<span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">).</span><span class="nx">stop</span><span class="p">(</span><span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">true</span><span class="p">).</span><span class="nx">animate</span><span class="p">(</span><span class="nx">styles</span><span class="p">,</span> <span class="p">{</span>
						<span class="nx">duration</span><span class="o">:</span> <span class="nx">interpolationDuration</span><span class="p">,</span> 
						<span class="nx">queue</span><span class="o">:</span> <span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">,</span>
						<span class="nx">easing</span><span class="o">:</span> <span class="nx">getEasingFunction</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">animationTimingFunction</span><span class="p">)</span>
					<span class="p">}).</span><span class="nx">dequeue</span><span class="p">(</span><span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">);</span>
				<span class="p">},</span> <span class="nx">keyframeOffset</span> <span class="o">+</span> <span class="nx">elementDelay</span><span class="p">));</span>
			<span class="p">});</span>
		<span class="p">};</span>
		</pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Start the animation cycle (it will repeat itself).</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">iterateAnimation</span><span class="p">();</span>
		</pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Allow chaining.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>
	<span class="p">};</span>
	
	</pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Immediately clear all animation timers; note that in-progress 
<code>$(...).animate()</code> transitions will not be halted.</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">keyframeAnimation</span><span class="p">.</span><span class="nx">abort</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">).</span><span class="nx">timeouts</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">).</span><span class="nx">timeouts</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">timeoutID</span><span class="p">)</span> <span class="p">{</span>
				<span class="nb">window</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeoutID</span><span class="p">);</span>
			<span class="p">});</span>
			<span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;keyframeAnimation&#39;</span><span class="p">).</span><span class="nx">timeouts</span><span class="p">;</span>
		<span class="p">}</span>
		</pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Allow chaining.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>
	<span class="p">};</span>
	
	</pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <h2>Private Helpers/Variables</h2>             </td>             <td class="code">               <div class="highlight"><pre>	
	</pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>See <a href="http://www.w3.org/TR/2012/WD-css3-transitions-20120403/#transition-timing-function-property">the W3C timing-function 
specification</a>.</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">cubicBezierTimingFunctionPoints</span> <span class="o">=</span> <span class="p">{</span>
		<span class="nx">ease</span><span class="o">:</span> <span class="p">[</span>
			<span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mf">0.25</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mf">0.1</span> <span class="p">},</span>
			<span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mf">0.25</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
		<span class="p">],</span>
		<span class="nx">linear</span><span class="o">:</span> <span class="p">[</span>
			<span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span> <span class="p">},</span>
			<span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
		<span class="p">],</span>
		<span class="nx">easeIn</span><span class="o">:</span> <span class="p">[</span>
			<span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mf">0.42</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span> <span class="p">},</span>
			<span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
		<span class="p">],</span>
		<span class="nx">easeOut</span><span class="o">:</span> <span class="p">[</span>
			<span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span> <span class="p">},</span>
			<span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mf">0.58</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
		<span class="p">],</span>
		<span class="nx">easeInOut</span><span class="o">:</span> <span class="p">[</span>
			<span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mf">0.42</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span> <span class="p">},</span>
			<span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mf">0.58</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
		<span class="p">]</span>
	<span class="p">};</span>
	
	</pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p><code>$.fn.animate</code> cannot accept easings as functions (lame), instead they 
need to be put into <code>$.easing</code> and specified via property names. This 
function creates a new <code>$.easing</code> method based on a property in 
<code>cubicBezierTimingFunctionPoints</code> (if needed) and returns its name.</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="cm">/* FIXME? Is the extra complexity of creating these on-the-fly worth the </span>
<span class="cm">	   small performance savings and the smaller `$.easing` namespace </span>
<span class="cm">	   footprint? Since `$.easing` is externally-visible, will it be </span>
<span class="cm">	   confusing to not always have all css* easing functions present? </span>
<span class="cm">	   Something like this would definitely still be necessary for custom </span>
<span class="cm">	   timing functions (e.g. &#39;cubic-bezier(x1, y1, x2, y2)&#39;). */</span>
	<span class="kd">var</span> <span class="nx">getEasingFunction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">timingFunctionName</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>The <code>$.easing</code> property name, e.g. "cssEaseIn".</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">easingName</span> <span class="o">=</span> <span class="s1">&#39;css&#39;</span> <span class="o">+</span> <span class="nx">timingFunctionName</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">timingFunctionName</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
		
		<span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">easing</span><span class="p">[</span><span class="nx">easingName</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Create a new <code>$.easing</code> method.</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="nx">cubicBezierTimingFunctionPoints</span><span class="p">[</span><span class="nx">timingFunctionName</span><span class="p">];</span>
			<span class="nx">$</span><span class="p">.</span><span class="nx">easing</span><span class="p">[</span><span class="nx">easingName</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">percentComplete</span><span class="p">,</span> <span class="nx">millisecondsSince</span><span class="p">,</span> <span class="nx">startValue</span><span class="p">,</span> <span class="nx">endValue</span><span class="p">,</span> <span class="nx">totalDuration</span><span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">totalDurationSeconds</span> <span class="o">=</span> <span class="nx">totalDuration</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
				<span class="k">return</span> <span class="nx">cubicBezierAtTime</span><span class="p">(</span><span class="nx">percentComplete</span><span class="p">,</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">x</span><span class="p">,</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">y</span><span class="p">,</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">x</span><span class="p">,</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">y</span><span class="p">,</span> <span class="nx">totalDurationSeconds</span><span class="p">);</span>
			<span class="p">};</span>
		<span class="p">}</span>
		
		<span class="k">return</span> <span class="nx">easingName</span><span class="p">;</span>
	<span class="p">};</span>
	
	</pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Used to create cubic bezier timing functions. This code is adapted from 
Christian Effenberger's public domain implementation of WebKit 
algorithms in WebCore/page/animation/AnimationBase.cpp.</p>

<ul>
<li><a href="http://trac.webkit.org/browser/trunk/Source/WebCore/page/animation/AnimationBase.cpp">WebKit's AnimationBase.cpp</a></li>
<li><a href="http://www.netzgesta.de/dev/cubic-bezier-timing-function.html">Christian Effenberger's Implementation</a></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="cm">/* TODO: more descriptive variable names. */</span>
	<span class="kd">var</span> <span class="nx">cubicBezierAtTime</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">p1x</span><span class="p">,</span> <span class="nx">p1y</span><span class="p">,</span> <span class="nx">p2x</span><span class="p">,</span> <span class="nx">p2y</span><span class="p">,</span> <span class="nx">duration</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Calculate the polynomial coefficients, implicit first and last 
control points are (0,0) and (1,1).</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="nx">p1x</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">bx</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="nx">p2x</span> <span class="o">-</span> <span class="nx">p1x</span><span class="p">)</span> <span class="o">-</span> <span class="nx">cx</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">ax</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">cx</span> <span class="o">-</span> <span class="nx">bx</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="nx">p1y</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">by</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="nx">p2y</span> <span class="o">-</span> <span class="nx">p1y</span><span class="p">)</span> <span class="o">-</span> <span class="nx">cy</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">ay</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">cy</span> <span class="o">-</span> <span class="nx">by</span><span class="p">;</span>
		</pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>'ax t^3 + bx t^2 + cx t' expanded using Horner's rule.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">sampleCurveX</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">((</span><span class="nx">ax</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">+</span> <span class="nx">bx</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span><span class="p">;</span>
		<span class="p">};</span>
		<span class="kd">var</span> <span class="nx">sampleCurveY</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">((</span><span class="nx">ay</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">+</span> <span class="nx">by</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span><span class="p">;</span>
		<span class="p">};</span>
		<span class="kd">var</span> <span class="nx">sampleCurveDerivativeX</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="nx">ax</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">bx</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">;</span>
		<span class="p">};</span>
		</pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Given an x value, find a parametric value it came from.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">solveCurveX</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">epsilon</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">t0</span><span class="p">,</span> <span class="nx">t1</span><span class="p">,</span> <span class="nx">t2</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">d2</span><span class="p">,</span> <span class="nx">i</span><span class="p">;</span>
			</pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>First try a few iterations of Newton's method, which is 
normally very quick.</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="k">for</span><span class="p">(</span><span class="nx">t2</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">x2</span> <span class="o">=</span> <span class="nx">sampleCurveX</span><span class="p">(</span><span class="nx">t2</span><span class="p">)</span> <span class="o">-</span> <span class="nx">x</span><span class="p">;</span>
				<span class="k">if</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">x2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nx">epsilon</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span> <span class="nx">t2</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="nx">d2</span> <span class="o">=</span> <span class="nx">sampleCurveDerivativeX</span><span class="p">(</span><span class="nx">t2</span><span class="p">);</span>
				<span class="k">if</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">d2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="nx">t2</span> <span class="o">=</span> <span class="nx">t2</span> <span class="o">-</span> <span class="nx">x2</span> <span class="o">/</span> <span class="nx">d2</span><span class="p">;</span>
			<span class="p">}</span>
			</pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Fall back to the bisection method for reliability.</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="nx">t0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="nx">t1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
			<span class="nx">t2</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
			<span class="k">if</span><span class="p">(</span><span class="nx">t2</span> <span class="o">&lt;</span> <span class="nx">t0</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">t0</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">if</span><span class="p">(</span><span class="nx">t2</span> <span class="o">&gt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">t1</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">while</span><span class="p">(</span><span class="nx">t0</span> <span class="o">&lt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">x2</span> <span class="o">=</span> <span class="nx">sampleCurveX</span><span class="p">(</span><span class="nx">t2</span><span class="p">);</span>
				<span class="k">if</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">x2</span> <span class="o">-</span> <span class="nx">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nx">epsilon</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span> <span class="nx">t2</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">if</span><span class="p">(</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">x2</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">t0</span> <span class="o">=</span> <span class="nx">t2</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="nx">t1</span> <span class="o">=</span> <span class="nx">t2</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="nx">t2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">t1</span> <span class="o">-</span> <span class="nx">t0</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="nx">t0</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">return</span> <span class="nx">t2</span><span class="p">;</span> <span class="c1">// Failure. /* FIXME: What does this imply? */</span>
		<span class="p">};</span>
		</pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>The epsilon value to pass given that the animation is going to 
run over <code>duration</code> seconds. The longer the animation, the more 
precision is needed in the timing function result to avoid ugly 
discontinuities.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">epsilon</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">200</span> <span class="o">*</span> <span class="nx">duration</span><span class="p">);</span>
		</pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>Convert from input time to parametric value in curve, then from 
that to output time.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">return</span> <span class="nx">sampleCurveY</span><span class="p">(</span><span class="nx">solveCurveX</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">epsilon</span><span class="p">));</span>
	<span class="p">};</span>
	
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span><span class="p">));</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 